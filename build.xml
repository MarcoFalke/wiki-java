<project default="imker_jars" name="Create Runnable Jars for Project Imker">
	<property name="dir.src" value="src" />
	<property name="dir.build" value="ant_build" />
	<property name="dir.dist" value="distrib" />
	<property name="dir.launch4j" value="launch4j" />

	<target name="compile">
		<delete dir="${dir.build}" />
		<mkdir dir="${dir.build}" />
		<javac srcdir="${dir.src}" destdir="${dir.build}" />
		<copydir src="${dir.src}/pics" dest="${dir.build}/pics" />
		<copydir src="${dir.src}/i18n" dest="${dir.build}/i18n" />
	</target>
	<target name="imker_gui_jar" depends="compile">
		<jar destfile="${dir.dist}/imker-gui.jar" filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Main-Class" value="app.ImkerGUI" />
				<attribute name="Class-Path" value="." />
			</manifest>
			<fileset dir="${dir.build}" />
		</jar>
	</target>
	<target name="imker_cli_jar" depends="compile">
		<jar destfile="${dir.dist}/imker-cli.jar" filesetmanifest="mergewithoutmain">
			<manifest>
				<attribute name="Main-Class" value="app.ImkerCLI" />
				<attribute name="Class-Path" value="." />
			</manifest>
			<fileset dir="${dir.build}" />
		</jar>
	</target>
	<target name="imker_jars" depends="imker_cli_jar,imker_gui_jar">
		<echo>Jar files created.</echo>
		<taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask" classpath="${dir.launch4j}/launch4j.jar:${dir.launch4j}/lib/xstream.jar" />
		<launch4j configFile="${dir.dist}/launch4jconfig.xml" />
		<echo>Windows executable created.</echo>
		<zip destfile="${dir.dist}/dist.zip" basedir="${dir.dist}" includes="*imker-*.*" />
		<echo>Zip file created.</echo>
		<echo>All done!</echo>
	</target>
</project>
